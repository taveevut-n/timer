<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
  <title>Countdown Timer</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
        name="viewport">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=Noto+Sans+Thai+Looped:wght@400;700&display=swap"
        rel="stylesheet">
  <style>
    body {
      font-family: "DM Mono", "Noto Sans Thai Looped", monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f4f4f4;
    }

    .timer {
      font-size: 12rem;
      font-weight: 700;
      background-color: white;
      padding: 80px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .timer .badge {
      font-size: 2rem;
    }
  </style>
</head>

<body>

  <div class="timer"
       id="countdown">โหลด...</div>

  <script>

    const urlParams = new URLSearchParams(window.location.search);
    const s = urlParams.get('s');
    const e = urlParams.get('e');

    const currentDate = new Date();
    const year = currentDate.getFullYear();
    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
    const day = String(currentDate.getDate()).padStart(2, '0');

    const formattedDate = `${year}-${month}-${day}`;
    // console.log(formattedDate);

    const startTime = new Date(`${formattedDate}T${s}:00`).getTime();
    const endTime = new Date(`${formattedDate}T${e}:00`).getTime();

    function updateCountdown() {
      const now = new Date().getTime();

      if (now < startTime) {
        document.getElementById("countdown").innerHTML = "Coming Soon";
      } else if (now >= startTime && now <= endTime) {
        const timeLeft = endTime - now;

        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById("countdown").innerHTML = `${days}<span class="badge">ว.</span> ${hours}<span class="badge">ชม.</span> ${minutes}<span class="badge">น.</span> ${seconds}<span class="badge">ว.</span>`;
      } else {
        document.getElementById("countdown").innerHTML = "หมดเวลา";
        clearInterval(interval);
      }
    }

    const interval = setInterval(updateCountdown, 1000);
  </script>

</body>

</html>